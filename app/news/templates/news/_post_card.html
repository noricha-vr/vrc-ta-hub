{% load markdown_extras %}
<div class="col-12">
  <a class="card text-decoration-none shadow-sm" href="{% url 'news:detail' post.slug %}">
    <div class="card-body">
      <div class="row align-items-center">
        {% if post.thumbnail %}
          <div class="col-md-3 mb-3 mb-md-0">
            <img src="{{ post.thumbnail.url }}" 
                 alt="{{ post.title|escape }}のサムネイル画像" 
                 class="img-fluid rounded"
                 loading="lazy">
          </div>
          <div class="col-md-9">
        {% else %}
          <div class="col-12">
        {% endif %}
          <div class="d-flex justify-content-between align-items-start mb-2">
            <h5 class="card-title mb-0">{{ post.title|escape }}</h5>
            <small class="text-muted">
              <time datetime="{{ post.published_at|date:'Y-m-d' }}">
                {{ post.published_at|date:'Y/m/d' }}
              </time>
            </small>
          </div>
          <p class="card-text text-muted">
            {{ post.get_meta_description|truncatechars:150|escape }}
          </p>
          {% if show_category|default:True %}
            <small class="badge bg-outline-primary text-primary border">{{ post.category.name|escape }}</small>
          {% endif %}
        </div>
      </div>
    </div>
  </a>
</div>