---
name: "note"
description: "プロジェクトのナレッジを参照。過去の失敗から学び、同じミスを繰り返さない。"
---

# プロジェクトノート

プロジェクト固有の「失敗→成功」経験を蓄積し、同じ失敗を繰り返さないための知識ベース。

## 構造

| ファイル | 役割 | 読むタイミング |
|----------|------|---------------|
| `status.md` | 今の状態 | セッション開始時 |
| `todo.md` | やること | タスク選択時 |
| `logs/` | 過去の記録 | 類似問題を探す時 |
| `how/` | 解決方法 | 解決策を探す時 |

## カテゴリ別ガイド

### how/
- [Django パターン](how/django.md)
  - save() オーバーライド時の update_fields 対応
  - ImageField のパス二重化問題
- [デプロイ・運用パターン](how/deployment.md)
  - 本番環境への接続方法
  - マイグレーション手順（ドライラン必須）
  - 静的ファイルのデプロイ
  - トラブルシューティング

### logs/
- [2026-01](logs/2026-01.md) - Django save() の update_fields と画像処理の落とし穴

## 実行手順

### 1. 基本ファイル読み込み

Read ツールで以下を読み込み:
- `.claude/skills/note/status.md` - 現在の状態

### 2. 引数に応じた追加読み込み

| 引数 | 追加で読むファイル |
|------|-------------------|
| `todo` | `.claude/skills/note/todo.md` |
| `logs` | `.claude/skills/note/logs/` の最新ファイル |
| `how {topic}` | `.claude/skills/note/how/{topic}.md` |
| (なし) | status.md のみ |

### 3. 自動昇格フロー

status.md の「学んだこと」セクションをスキャン:

1. **各項目を分析**:
   - カテゴリを推定（例: docker, python, django など）
   - 既存 how/ との類似をチェック

2. **昇格判定**:
   | 状況 | アクション |
   |------|-----------|
   | 類似パターンあり | 既存パターンにマージ |
   | 新規かつ有用 | 新しいパターンとして追加 |
   | 一時的な情報 | 昇格せずスキップ |
   | 既に `[昇格済み]` マーク | スキップ |

3. **昇格実行**（確認なし）:
   - `how/{category}.md` に追記
   - `logs/YYYY-MM.md` に記録
   - status.md の該当行に `[昇格済み]` マーク

4. **直近3件は status.md に残す**

### 4. レポート出力

```
## ノートレポート

### セッション状態
- 最終更新: {日時}
- フォーカス: {内容}

### 自動昇格結果
- 昇格: {N}件 → how/{categories}
- スキップ: {M}件

### 関連パターン
- {関連パターン}

### 最近の経験
- {日付}: {タイトル}
```

## 蓄積する経験の基準

蓄積する:
- 一発でゴールにたどり着かなかったもの
- 試行錯誤して発見した有用なパターン
- ハマりやすいポイントと回避方法

蓄積しない:
- 一発で成功したもの
- 一般的なベストプラクティス
